---
title: "ERROR::localStorage is not defined"
date: "2021-01-17T13:41:32.169Z"
path: "/Project/error/1/"
category: "Project"
ci: "Err"
cat: "ERROR"
tags: ["ERROR","Gatsby"]
description: "ERROR::localStorage is not defined"
---



##### ERROR

localStorage is not defined

<hr />

###### 발생

gatsby develop 상태에서는 잘 돌아가던 코드가 build를 한 이후에 제대로 작동하지 않음

<br />

###### 원인

React 서버의 랜더링 문제 때문이었는데 window, document 같은 브라우저 전역 객체가 참조되지 않아서 발생했던 문제

<br />

###### 해결

```javascript
if (typeof window !== 'undefined') {
    // error가 발생한 코드 작성
}
```

<br />

<hr />

###### 나의 경우

```javascript
// header.js
// 수정 전
let isChecked = localStorage.getItem('theme') === 'dark' ? true : false;
```

```javascript
// 수정 후
let isChecked
if (typeof window !== 'undefined') {
    isChecked = localStorage.getItem('theme') === 'dark' ? true : false;
}
```

